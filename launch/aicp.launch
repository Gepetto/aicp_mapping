<?xml version="1.0" encoding="utf-8"?>

<launch>

  <arg name="fixed_frame"      default="map"/>
  <arg name="map_from_file_path"         default="$(find gazebo_worlds_drs)/point_clouds/fire_college.ply"/>
  <arg name="load_map_from_file"      default="true"/>
  <arg name="localize_against_map"      default="true"/>


  <!-- Run AICP (command line configuration) -->
  <node pkg="aicp" type="aicp_ros_online" name="aicp_ros_online" output="screen">

    <!-- In ROS should always be set to debug mode -->
    <param name="working_mode"                  value="debug" />
    <!-- Fixed frame (default: map, debug: map_test -->
    <param name="fixed_frame"                   value="$(arg fixed_frame)" />
    <!-- Prior map info -->
    <param name="load_map_from_file"            value="$(arg load_map_from_file)" />
    <param name="map_from_file_path"            value="$(arg map_from_file_path)" />
    <param name="localize_against_map"          value="$(arg localize_against_map)" />
    <!-- Prior map params -->
    <param name="crop_map_around_base"          value="15.0" /> <!-- box dimesions: value*2 x value*2 -->
                                                                <!-- 15.0 to generate Ground Truth (David IROS19) -->
    <param name="merge_aligned_clouds_to_map"   value="true" /> <!-- true to generate Ground Truth (David IROS19) -->
    <!-- Reference update policy -->
    <param name="failure_prediction_mode"       value="false" />
    <param name="reference_update_frequency"    value="5" />
    <!-- Max allowed correction magnitude (probably failed alignment otherwise) -->
    <param name="max_correction_magnitude"      value="1.0" /> <!-- 1.5 to generate Ground Truth (David IROS19) -->
    <!-- 3D point cloud characteristics -->
    <param name="batch_size"                    value="7" />
  	<!-- Visualize and store -->
    <param name="verbose"                       value="true" />

  </node>

</launch>
